<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ciasteczko z Wr贸偶b</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', serif;
            background-color: #ffffff;
            color: #000000;
            padding: 20px;
            text-align: center;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #000;
        }

        .fortune-display {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #000;
            background-color: #ffffff;
        }

        .fortune-text {
            font-size: 22px;
            line-height: 1.6;
            text-align: center;
        }

        .warning-text {
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .boundary-text {
            font-size: 18px;
            font-style: italic;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #000;
        }

        .prompt-text {
            font-size: 32px;
            font-weight: bold;
        }

        button {
            font-size: 24px;
            padding: 20px 40px;
            margin: 10px;
            border: 3px solid #000;
            background-color: #ffffff;
            color: #000000;
            cursor: pointer;
            font-family: inherit;
            min-width: 200px;
        }

        button:active {
            background-color: #000000;
            color: #ffffff;
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 2px solid #000;
            font-size: 16px;
        }

        .qr-container {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: #ffffff;
            padding: 5px;
            border: 2px solid #000;
        }

        .qr-code {
            width: 80px;
            height: 80px;
        }

        .cooldown-timer {
            font-size: 18px;
            margin: 10px 0;
            color: #666;
        }

        .subtitle {
            font-size: 16px;
            margin-top: 10px;
            color: #000;
        }

        /* E-ink optimization */
        @media screen and (max-width: 800px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 24px;
            }

            .fortune-text {
                font-size: 18px;
            }

            .warning-text {
                font-size: 22px;
            }

            button {
                font-size: 20px;
                padding: 15px 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="mainContent">
            <h1> CIASTECZKO Z WR呕B</h1>
            <div class="subtitle">Dotknij dla swojej wr贸偶by</div>

            <div class="fortune-display" id="fortuneDisplay">
                <div class="fortune-text" id="fortuneText">
                    Witaj! Dotknij ekranu, aby otrzyma swoj pierwsz wr贸偶b.
                </div>
            </div>

            <div class="cooldown-timer" id="cooldownTimer"></div>

            <button id="fortuneButton" onclick="handleTouch()" aria-label="Losuj now wr贸偶b">
                Losuj Wr贸偶b
            </button>

            <div class="footer" id="footerText">
                Dotknij dla nowej wr贸偶by
            </div>
        </div>
    </div>

    <div class="qr-container">
        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 29 29'%3E%3Cpath fill='%23000' d='M1 1h7v7H1zm9 0h1v1H10zm2 0h1v2h-2v1h1v1h-1v1h2v1h-1v1h1v1h-1v2h1v-1h1v-1h1v1h2v-2h-1v-1h2v-2h-1v1h-1v-1h-1v-1h1v-1h-2V3h2V1h-4v1h-1zm10 0h7v7h-7zM2 2v5h5V2zm19 0v5h5V2zm-11 1h1v1h-1zm4 0h1v1h-1zM3 3h3v3H3zm20 0h3v3h-3zm-13 7v1h-1v1H8v-1H7v1H6v1h1v1H6v1h1v-1h1v-1h1v2h1v1H9v1H8v1h1v1H8v1h1v-1h1v1h1v1H8v1H7v1h1v-1h1v2H8v1h2v-2h1v1h1v1h-1v1h3v-1h-1v-2h1v-1h-1v-1h1v1h1v1h1v-1h1v1h1v-1h-1v-1h1v-2h-1v1h-1v-2h1v-1h-2v1h-2v-1h-1v2h-1v-2h2v-1h-3v1h-1v-1h1v-2h-1v1h-1v1h-1v-1H9v1H8v-1h1v-1h1zm11-1h1v2h-1v1h-2v-1h2v-1h-1v-1h1zm3 0v1h-2v-1zm-13 1h1v2h1v-1h1v2h-1v1h-1v1h-1zm12 0h1v1h-1zm-20 1v1H1v1h1v-1h1v1h1v2H3v-1H2v2h1v-1h1v1H3v1h1v-1h3v-1H6v-1h1v-2H6v1H5v-1H4v-1H3v1H2zm20 0h1v1h-1zm-7 1v1h-1v1h1v-1h1v-1zm9 0h1v1h-1zM1 13h1v1H1zm3 0h1v3H3v1h1v1H3v1H2v1h2v-1h1v1h1v-1h1v1h1v-2H7v1H6v-2h2v-1H7v-1h1v1h2v-1h-1v-1h-1v-1H7v1H6v-1H4zm18 0h1v1h-1zm-2 1v1h-1v-1zm-8 1h1v1h-1zm11 0h1v1h-1zm-18 1h1v2H2zm7 0v1h1v1h-1v1h1v2h1v-3h1v1h1v-1h-1v-1h-1v-1h-1v1h-1zm4 0h1v1h-1zm7 0h2v1h-2zm-6 1h1v1h-1zm-3 1h1v1h-1zm-9 1h1v1H2zm6 0v1H7v1h2v-1h-1zm7 0h1v1h-1zm6 0h2v1h-2zM1 21h7v7H1zm9 0h1v1h-1zm2 0h2v1h1v-1h1v1h1v2h-1v2h1v1h-2v1h1v-1h2v-1h-1v-1h2v1h1v1h-1v1h-5v-2h-2v-1h1v-2h-1v1h-1v-1h1zm11 0h1v1h-1zM2 22v5h5v-5zm1 1h3v3H3zm17 0v1h-1v2h1v1h1v1h-1v1h2v-5h-1v1h-1v-1h-1v-1zm-10 1h1v1h-1zm13 1h1v1h-1zm-2 1h1v2h-1zm3 0h1v1h-1z'/%3E%3C/svg%3E"
             alt="QR Code" class="qr-code" title="https://maciejjankowski.com/qr/">
    </div>

    <script>
        // Fortune messages
        var REGULAR_FORTUNES = [
            "Twoja kawa bdzie dzisiaj idealna - ale dopiero trzecia.",
            "Kto pomyli o Tobie dzisiaj. Prawdopodobnie Tw贸j kot.",
            "W przyszoci czeka Ci wielkie szczcie. Albo pizza.",
            "Jutro bdzie lepszy dzie. Chyba 偶e bdzie poniedziaek.",
            "Twoje szczcie jest tu偶 za rogiem. Za kt贸rym? To tajemnica.",
            "Niedugo spotkasz kogo interesujcego. Mo偶e to by Ty w lustrze.",
            "Wielka przygoda czeka na Ciebie. W lod贸wce.",
            "Los umiechnie si do Ciebie. Pewnie sardonicznie.",
            "Czeka Ci niespodziewany prezent. Prawdopodobnie rachunek.",
            "Wkr贸tce odkryjesz co nowego. Prawdopodobnie kurz pod 贸偶kiem.",
            "Twoja cierpliwo zostanie wkr贸tce nagrodzona. Ale nie dzisiaj.",
            "Kto Ci potrzebuje. Twoja pralka, brzczy ju偶 godzin.",
            "Jutro bdzie wietny dzie na nowe pocztki. Albo dla drzemki.",
            "Sukces jest blisko. Okoo 3 kawy dalej.",
            "Wielkie rzeczy maj mae pocztki. Jak Twoja pensja.",
            "Twoja mdro ronie. Wolniej ni偶 chciaby, ale ronie.",
            "Szczcie sprzyja odwa偶nym. Ale ostro偶ni 偶yj du偶ej.",
            "Wkr贸tce otrzymasz dobr wiadomo. Albo spam.",
            "Twoje marzenia si speni. Te o spaniu du偶ej.",
            "Los przygotowa dla Ciebie niespodziank. Miej parasolk.",
            "Dzisiaj jest dobry dzie na zmiany. Zacznij od skarpetek.",
            "Wkr贸tce znajdziesz to, czego szukasz. Pilot by w kanapie.",
            "Twoja energia przyciga ludzi. Szczeg贸lnie tych nudnych.",
            "Wielka mio czeka za rogiem. Albo wielki pies.",
            "Twoja intuicja Ci nie zawiedzie. Tym razem.",
            "Szczcie lubi towarzystwo. Przychodzi z rachunkami.",
            "Jutro bdzie lepiej. Matematycznie musi w kocu by.",
            "Twoje talenty zostan docenione. Kiedy? Nie teraz.",
            "Wkr贸tce poznasz wa偶n prawd. Koty rzdz internetem.",
            "Twoja przyszo jest jasna. Przyciemnij ekran.",
            "Czeka Ci podr贸偶. Do sklepu te偶 si liczy.",
            "Kto myli o Tobie z rozrzewnieniem. Tw贸j terapeuta.",
            "Wielkie pienidze nadchodz. W rachunkach.",
            "Twoja kreatywno rozkwitnie. Po czwartej kawie.",
            "Los szykuje Ci co specjalnego. Prawdopodobnie korki.",
            "Wkr贸tce staniesz przed wa偶nym wyborem. Herbata czy kawa.",
            "Twoje 偶ycie nabierze tempa. Gdy zgubisz autobus.",
            "Szczcie do Ciebie wr贸ci. Zapomniao portfela.",
            "Twoja cierpliwo przyniesie owoce. Zgnie, ale zawsze.",
            "Wielki sukces jest w zasigu rki. Ale za kr贸tkie masz.",
            "Kto Ci podziwia. Z daleka. Bardzo daleka.",
            "Twoja popularno wzronie. W gowach spamer贸w.",
            "Wkr贸tce odkryjesz swoje prawdziwe powoanie. Drzemka.",
            "Los umiechnie si do Ciebie. Gdy si przewr贸cisz.",
            "Twoje marzenia s na wycignicie rki. Ale rce masz kr贸tkie.",
            "Wielka przygoda rozpocznie si dzi. Czytanie instrukcji IKEA.",
            "Twoja szczodro zostanie nagrodzona. Karma. Kiedy.",
            "Wkr贸tce otrzymasz komplement. Od bota.",
            "Twoja mdro zadziwi innych. Gdy wreszcie si odzywasz.",
            "Szczcie czeka za drzwiami. Ale si pozamykao.",
            "Jutro przyniesie dobre wiadomoci. Albo pitek.",
            "Twoja energia jest zara藕liwa. Bd藕 ostro偶ny.",
            "Los sprzyja Ci dzisiaj. Ale tylko do 15:00.",
            "Wkr贸tce poznasz kogo wa偶nego. Mo偶e to by Tw贸j szef.",
            "Twoje talenty bysn. Gdy dziaasz mi wiato.",
            "Wielki sukces wymaga powice. Zacznij od snu.",
            "Twoja przyszo jest w Twoich rkach. I telefon te偶.",
            "Szczcie przychodzi do cierpliwych. Ale zajmuje mu to wieki.",
            "Wkr贸tce co Ci zaskoczy. Prawdopodobnie alarm.",
            "Twoje marzenia si speni. Mo偶e w innym 偶yciu.",
            "Kto dzi o Tobie pomyli. Windykator prawdopodobnie.",
            "Twoja popularno ronie. Wr贸d telemarker贸w.",
            "Wielka zmiana nadchodzi. Lato na jesie na przykad.",
            "Los ma dla Ciebie plan. Najwyra藕niej komediowy.",
            "Twoja kreatywno jest nieograniczona. Wym贸wki te偶.",
            "Wkr贸tce znajdziesz odpowied藕. Pytanie tylko jakie.",
            "Szczcie lubi miaych. Ale ubezpieczenie te偶 si przyda.",
            "Twoja wytrwao zostanie nagrodzona. Kiedy. Mo偶e.",
            "Wielka mio jest blisko. Dystans spoeczny jednak.",
            "Twoja intuicja to dar. Czasami uszkodzony.",
            "Dzisiaj jest Tw贸j dzie. Jeden z 365.",
            "Wkr贸tce otrzymasz zasu偶one uznanie. Lub mandat.",
            "Twoje 偶ycie to przygoda. Czasem horror.",
            "Los szykuje niespodzianki. Trzymaj parasol.",
            "Twoja mdro wzrasta. Wolno, ale jednak.",
            "Wielki sukces wymaga czasu. I kawy. Du偶o kawy.",
            "Twoja przyszo jest pena mo偶liwoci. Jak te偶 problem贸w.",
            "Szczcie umiechnie si do Ciebie. Kiedy.",
            "Wkr贸tce co si zmieni. Mo偶e pogoda.",
            "Twoje marzenia s wa偶ne. Ale rachunki pilniejsze.",
            "Kto Ci potrzebuje. Netflix pyta czy jeszcze ogldasz.",
            "Twoja energia jest inspirujca. Dla Red Bulla.",
            "Wielka przygoda czeka. Za mniejsza cena na allegro.",
            "Los ma dla Ciebie prezent. Nadziej.",
            "Twoja cierpliwo jest niezwyka. Albo internet powolny.",
            "Wkr贸tce poznasz wa偶n osob. Mo偶e hydraulika.",
            "Szczcie sprzyja przygotowanym. Ale i szczliwym te偶.",
            "Twoje talenty s wyjtkowe. Odkryjesz je kt贸rego dnia.",
            "Wielki sukces jest blisko. Geograficznie u ssiada.",
            "Twoja przyszo wyglda wietnie. Z tej perspektywy.",
            "Dzisiaj umiechnie si do Ciebie los. Albo nieznajomy.",
            "Wkr贸tce znajdziesz co wartociowego. Mo偶e sens 偶ycia.",
            "Twoja kreatywno nie zna granic. Tw贸j bud偶et jednak tak.",
            "Los przygotowa co specjalnego. Poniedziaek rano.",
            "Twoje marzenia si speni. W grach komputerowych.",
            "Wielka zmiana nadchodzi. Pory roku si zmieniaj.",
            "Twoja mdro jest legendarna. W Twoim wasnym umyle.",
            "Szczcie czeka za rogiem. Kt贸rego? Los wie.",
            "Wkr贸tce otrzymasz nagrod. Za cierpliwo w korku.",
            "Twoje 偶ycie to dzieo sztuki. Abstrakcyjnej.",
            "Kto myli o Tobie. Tw贸j alarm za 5 minut.",
            "Twoja popularno wzronie. Algorytm tak zdecydowa.",
            "Wielkie pienidze czekaj. W Monopoly.",
            "Los ma dla Ciebie niespodziank. Deszcz pewnie.",
            "Twoja energia jest zara藕liwa. I wyczerpujca.",
            "Wkr贸tce poznasz prawd. Kawa te偶 ma dat wa偶noci.",
            "Szczcie przychodzi w maych porcjach. Jak frytki.",
            "Twoje talenty zostan odkryte. Przez przypadek.",
            "Wielki sukces wymaga wysiku. Albo szczcia.",
            "Twoja przyszo jest jasna. Zacignij rolety.",
            "Dzisiaj bdzie dobry dzie. Dla kogo.",
            "Wkr贸tce co Ci ucieszy. Mo偶e pitek.",
            "Twoja mdro ronie. Jak zadu偶enie.",
            "Los umiechnie si do Ciebie. Przez pomyk.",
            "Twoje marzenia s pikne. I niemo偶liwe.",
            "Wielka mio czeka. W serialu na Netflix.",
            "Twoja cierpliwo jest godna podziwu. Albo lenistwa.",
            "Szczcie sprzyja odwa偶nym. Ale te偶 ostro偶nym.",
            "Wkr贸tce otrzymasz dobr wiadomo. Spam si nie liczy.",
            "Twoje 偶ycie to przygoda. Jak IKEA w sobot.",
            "Kto Ci podziwia. Twoje selfie na Instagramie.",
            "Twoja energia przyciga szczcie. I komary.",
            "Wielka przygoda rozpocznie si. Jak znajdziesz klucze.",
            "Los szykuje co dobrego. Ale to trwa.",
            "Twoja kreatywno jest niesamowita. W wym贸wkach.",
            "Wkr贸tce odkryjesz sw贸j talent. Albo kolejn wad.",
            "Szczcie lubi towarzystwo. Przychodzi z ca rodzin.",
            "Twoje marzenia si speni. Jak kupisz kupony loterii.",
            "Wielki sukces jest w drodze. Ale utkn w korku.",
            "Twoja przyszo jest pena niespodzianek. Rachunk贸w te偶.",
            "Dzisiaj co si zmieni. Mo偶e nastr贸j.",
            "Wkr贸tce poznasz kogo ciekawego. Mo偶e now wersj siebie.",
            "Twoja mdro jest bezcenna. Nikt nie chce paci.",
            "Los ma dla Ciebie plan. Plan B najwyra藕niej.",
            "Twoje talenty s niezwyke. I dobrze ukryte.",
            "Wielka zmiana nadchodzi. Wymie skarpetki.",
            "Twoja cierpliwo zostanie wynagrodzona. W nastpnym 偶yciu.",
            "Szczcie czeka za drzwiami. Zgubio klucze.",
            "Wkr贸tce otrzymasz prezent. Od 偶ycia. Lekcj.",
            "Twoje 偶ycie to film. Prawdopodobnie komedia.",
            "Kto myli o Tobie ciepo. W sumie jest gorco.",
            "Twoja popularno ronie. W statystykach telemarketingu.",
            "Wielkie pienidze nadchodz. W grze Monopoly.",
            "Los umiechnie si do Ciebie. Ironicznie.",
            "Twoja energia jest imponujca. Po 10 kawie.",
            "Wkr贸tce odkryjesz prawd. WiFi haso to admin.",
            "Szczcie sprzyja przygotowanym. Przygotuj parasol.",
            "Twoje marzenia s wa偶ne. Ale budzik wa偶niejszy.",
            "Wielki sukces wymaga powice. Netflix mo偶e poczeka.",
            "Twoja przyszo jest w Twoich rkach. Telefon te偶.",
            "Dzisiaj bdzie wyjtkowy dzie. Jak ka偶dy inny.",
            "Wkr贸tce co Ci zaskoczy. Prawdopodobnie rachunek.",
            "Twoja mdro przyciga ludzi. Te偶 ich mczy.",
            "Los przygotowa niespodziank. Nadziej si spodoba.",
            "Twoja kreatywno rozkwitnie. Jak zapacisz rachunki.",
            "Wielka mio jest blisko. Ale nosi maseczk.",
            "Twoja cierpliwo jest legendarna. Albo internet wolny.",
            "Szczcie lubi miaych. Ale ostro偶nych te偶 ceni.",
            "Wkr贸tce otrzymasz komplement. Od mamy.",
            "Twoje 偶ycie to dzieo. W trakcie remontu.",
            "Kto Ci potrzebuje. Roliny bagaj o wod.",
            "Twoja energia jest zara藕liwa. Zachowaj dystans.",
            "Wielka przygoda czeka. W kolejce do urzdu.",
            "Los ma dla Ciebie dar. Dowiadczenie. Zn贸w.",
            "Twoje talenty s ukryte. Bardzo dobrze ukryte.",
            "Wkr贸tce poznasz wa偶n prawd. mietnik ju偶 jutro.",
            "Szczcie przychodzi w maych dawkach. Homeopatycznych.",
            "Twoje marzenia si speni. W jakiej formie.",
            "Wielki sukces wymaga czasu. I kasy. I szczcia.",
            "Twoja przyszo wyglda ciekawie. Z daleka.",
            "Dzisiaj umiechnie si szczcie. Do kogo innego.",
            "Wkr贸tce znajdziesz co wa偶nego. Klucze w kieszeni.",
            "Twoja mdro ronie z wiekiem. Bardzo wolno.",
            "Los szykuje co specjalnego. Niespodziank podatkow.",
            "Twoja kreatywno nie zna granic. Bud偶et jednak tak.",
            "Wielka zmiana nadchodzi. Numer konta bankowego.",
            "Twoja cierpliwo jest niesamowita. Albo rezygnacja.",
            "Szczcie czeka tu偶 za rogiem. Ale tam remont.",
            "Wkr贸tce otrzymasz nagrod. Za najdu偶sze czekanie.",
            "Twoje 偶ycie to przygoda. Czasem survival horror.",
            "Kto myli o Tobie. Zapewne komornik.",
            "Twoja popularno wzronie. Wr贸d bot贸w.",
            "Wielkie pienidze czekaj. W cudzym portfelu.",
            "Los umiechnie si do Ciebie. Sarkastycznie.",
            "Twoja energia jest inspirujca. I wyczerpujca.",
            "Wkr贸tce poznasz prawd. Kawa nie jest jedzeniem.",
            "Szczcie sprzyja odwa偶nym. I ubezpieczonym.",
            "Twoje talenty zostan odkryte. Przez archeolog贸w.",
            "Wielki sukces jest blisko. Ale za potkiem.",
            "Twoja przyszo jest jasna. Wycz lamp.",
            "Dzisiaj bdzie lepiej. Ni偶 jutro.",
            "Wkr贸tce co si zmieni. Pogoda na przykad.",
            "Twoja mdro jest legendarna. W Twojej wyobra藕ni.",
            "Los przygotowa prezent. Dowiadczenie 偶yciowe.",
            "Twoje marzenia s pikne. Szkoda 偶e niemo偶liwe.",
            "Wielka mio czeka. W kolejnej kolejce.",
            "Twoja cierpliwo zostanie nagrodzona. Kiedy. Mo偶e.",
            "Szczcie lubi towarzystwo. Ale przychodzi samo.",
            "Wkr贸tce otrzymasz wiadomo. Prawdopodobnie spam.",
            "Twoje 偶ycie to sztuka. Abstrakcyjna i niezrozumiaa."
        ];

        var BOUNDARY_FORTUNES = [
            "Granice s wa偶ne - nawet dla ciasteczek z wr贸偶b.",
            "Szacunek zaczyna si od suchania 'nie'.",
            "Cierpliwo to cnota. Szczeg贸lnie przy dotykaniu.",
            "Prawdziwa blisko wymaga zgody obu stron.",
            "Najlepsze rzeczy przychodz do tych, kt贸rzy czekaj.",
            "Zgoda to fundament ka偶dej relacji.",
            "Przestrze osobista to nie luksus, to konieczno.",
            "Popiech to zy doradca, szczeg贸lnie w dotykaniu.",
            "Komunikacja jest kluczem - zapytaj przed dotkniciem.",
            "Szacunek dla granic to przejaw dojrzaoci.",
            "Nie' to pene zdanie i zasuguje na szacunek.",
            "Prawdziwa wi藕 buduje si na wzajemnym szacunku.",
            "Zgoda musi by wiadoma, dobrowolna i wyra藕na.",
            "Cierpliwo pokazuje, 偶e Ci naprawd zale偶y.",
            "Granice to nie odrzucenie, to troska o siebie.",
            "Ka偶dy ma prawo powiedzie 'nie' w ka偶dej chwili.",
            "Prawdziwa sia to szanowanie cudzych granic.",
            "Blisko bez zgody to naruszenie, nie relacja.",
            "Czekanie na waciwy moment to sztuka.",
            "Szacunek dla granic buduje zaufanie.",
            "Autonomia ciaa to podstawowe prawo czowieka.",
            "Prawdziwe poczenie wymaga wzajemnoci.",
            "Zgoda to proces, nie jednorazowe 'tak'.",
            "Poczekaj na zaproszenie - to proste.",
            "Granice to wyraz samowiadomoci i siy.",
            "Nigdy nie zakadaj - zawsze pytaj.",
            "Prawdziwa intymno rodzi si z szacunku.",
            "Cierpliwo to jzyk mioci.",
            "Ka偶dy dotyk wymaga przyzwolenia.",
            "Szacunek dla 'nie' to szacunek dla osoby."
        ];

        var TOO_SOON_MESSAGES = [
            "Nie dotykaj mnie!",
            "Mo偶e najpierw powiesz jak masz na imi, zanim zaczniesz mnie dotyka",
            "Hej! Powoli!",
            "Za wczenie!",
            "Jeszcze nie!",
            "Poczekaj chwil!",
            "Daj mi czas!",
            "Nie tak szybko!"
        ];

        // App state
        var lastTouchTime = 0;
        var touchCooldown = 15000; // 15 seconds in milliseconds
        var canTouchPromptShown = false;
        var nextPromptTime = 0;
        var promptTimer = null;
        var countdownTimer = null;

        // Helper functions
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function getRandomFortune() {
            return getRandomItem(REGULAR_FORTUNES);
        }

        function getBoundaryFortune() {
            return getRandomItem(BOUNDARY_FORTUNES);
        }

        function getTooSoonMessage() {
            return getRandomItem(TOO_SOON_MESSAGES);
        }

        function displayFortune(message, isBoundary) {
            var display = document.getElementById('fortuneDisplay');
            var h1 = document.querySelector('h1');
            var footer = document.getElementById('footerText');

            if (isBoundary) {
                h1.textContent = '锔 GRANICE';
                footer.textContent = 'Szacunek = Podstawa';
            } else {
                h1.textContent = ' CIASTECZKO Z WR呕B';
                footer.textContent = 'Dotknij dla nowej wr贸偶by';
            }

            display.innerHTML = '<div class="fortune-text">' + message + '</div>';
        }

        function displayTooSoonMessage() {
            var warning = getTooSoonMessage();
            var boundaryFortune = getBoundaryFortune();

            var html = '<div class="warning-text">' + warning + '</div>' +
                      '<div class="boundary-text">' + boundaryFortune + '</div>';

            document.getElementById('fortuneDisplay').innerHTML = html;
            document.querySelector('h1').textContent = '锔 GRANICE';
            document.getElementById('footerText').textContent = 'Szacunek = Podstawa';
        }

        function displayPrompt() {
            var display = document.getElementById('fortuneDisplay');
            display.innerHTML = '<div class="prompt-text">Mo偶na dotyka ;-)</div>';
            canTouchPromptShown = true;
            stopCountdown();
        }

        function updateCountdown() {
            var now = Date.now();
            var timeSinceTouch = now - lastTouchTime;
            var timeUntilReady = touchCooldown - timeSinceTouch;

            if (timeUntilReady <= 0) {
                stopCountdown();
                return;
            }

            var seconds = Math.ceil(timeUntilReady / 1000);
            document.getElementById('cooldownTimer').textContent =
                'Mo偶na dotkn za: ' + seconds + 's';
        }

        function startCountdown() {
            stopCountdown();
            updateCountdown();
            countdownTimer = setInterval(updateCountdown, 1000);
        }

        function stopCountdown() {
            if (countdownTimer) {
                clearInterval(countdownTimer);
                countdownTimer = null;
            }
            document.getElementById('cooldownTimer').textContent = '';
        }

        function schedulePrompt() {
            if (promptTimer) {
                clearTimeout(promptTimer);
            }

            // Random delay between 10-30 seconds
            var delay = 10000 + Math.random() * 20000;
            nextPromptTime = Date.now() + delay;
            canTouchPromptShown = false;

            promptTimer = setTimeout(function() {
                var now = Date.now();
                var timeSinceTouch = now - lastTouchTime;

                if (timeSinceTouch >= touchCooldown && !canTouchPromptShown) {
                    displayPrompt();
                }
            }, delay);
        }

        function handleTouch() {
            var now = Date.now();
            var timeSinceLastTouch = now - lastTouchTime;

            if (timeSinceLastTouch < touchCooldown) {
                // Touch too soon - show warning
                displayTooSoonMessage();
                lastTouchTime = now;
                schedulePrompt();
                startCountdown();
            } else {
                // Touch OK - show new fortune
                var fortune = getRandomFortune();
                displayFortune(fortune, false);
                lastTouchTime = now;
                schedulePrompt();
                startCountdown();
            }
        }

        // Initialize app
        function init() {
            var fortune = getRandomFortune();
            displayFortune(fortune, false);
            lastTouchTime = Date.now();
            schedulePrompt();
            startCountdown();
        }

        // Start app when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        // Add touch event listener for better mobile support
        document.getElementById('fortuneButton').addEventListener('touchstart', function(e) {
            e.preventDefault();
            handleTouch();
        });
    </script>
</body>
</html>
